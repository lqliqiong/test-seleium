{"name": "test_mp_login[13812345678-246810-138123456780]", "status": "broken", "statusDetails": {"message": "NameError: name 'allure' is not defined", "trace": "self = <scripts.test_01_mp_login.TestMpLogin object at 0x111239150>, username = '13812345678', code = 246810, expect = '13812345678'\n\n    @pytest.mark.parametrize(\"username, code, expect\", readyaml(\"mp_login.yml\"))\n    def test_mp_login(self, username, code, expect):\n    \n        try:\n            # 调用登录业务方法\n>           self.mp.page_mp_login(username, code)\n\nscripts/test_01_mp_login.py:31: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <page.page_mp_login.PageMpLogin object at 0x1113ceed0>, username = '13812345678', code = 246810\n\n    def page_mp_login(self, username, code):\n        \"\"\"\n        调用相同页面的操作步骤\n        跨页面不考虑\n        :return:\n        \"\"\"\n        self.page_input_username(username)\n>       self.page_input_code(code)\n\npage/page_mp_login.py:35: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <page.page_mp_login.PageMpLogin object at 0x1113ceed0>, code = 246810\n\n    def page_input_code(self, code):\n>       self.base_input(page.mp_code, code)\n\npage/page_mp_login.py:15: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <page.page_mp_login.PageMpLogin object at 0x1113ceed0>, loc = ('css selector', \"[placeholder='验证码']\"), value = 246810\n\n    def base_input(self, loc, value):\n        \"\"\"\n    \n        :param loc: 元素定位信息\n        :param value:输入值\n        \"\"\"\n        # 获取元素\n>       el = self.base_find(loc)\n\nbase/base.py:39: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <page.page_mp_login.PageMpLogin object at 0x1113ceed0>, loc = ('css selector', \"[placeholder='验证码']\"), timeout = 30, poll = 0.5\n\n    def base_find(self, loc, timeout=30, poll=0.5):\n        \"\"\"\n    \n        :param loc: 格式为列表或元组 内容：元素定位信息\n        :param timeout: 查找元素超时时间 默认30s\n        :param poll: 查找元素频率 默认为0.5s\n        :return: 元素\n        \"\"\"\n        log.info(\"正在查找元素:{}\".format(loc))\n        return (WebDriverWait(self.driver, timeout=timeout, poll_frequency=poll)\n>               .until(lambda x: x.find_element(*loc)))\n\nbase/base.py:29: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <selenium.webdriver.support.wait.WebDriverWait (session=\"4ca8a23182a9f0ecb2fac80ecf9f77fc\")>, method = <function Base.base_find.<locals>.<lambda> at 0x1113bbb00>, message = ''\n\n    def until(self, method, message=''):\n        \"\"\"Calls the method provided with the driver as an argument until the \\\n        return value is not False.\"\"\"\n        screen = None\n        stacktrace = None\n    \n        end_time = time.time() + self._timeout\n        while True:\n            try:\n                value = method(self._driver)\n                if value:\n                    return value\n            except self._ignored_exceptions as exc:\n                screen = getattr(exc, 'screen', None)\n                stacktrace = getattr(exc, 'stacktrace', None)\n            time.sleep(self._poll)\n            if time.time() > end_time:\n                break\n>       raise TimeoutException(message, screen, stacktrace)\nE       selenium.common.exceptions.TimeoutException: Message:\n\n/usr/local/lib/python3.7/site-packages/selenium/webdriver/support/wait.py:80: TimeoutException\n\nDuring handling of the above exception, another exception occurred:\n\nself = <scripts.test_01_mp_login.TestMpLogin object at 0x111239150>, username = '13812345678', code = 246810, expect = '13812345678'\n\n    @pytest.mark.parametrize(\"username, code, expect\", readyaml(\"mp_login.yml\"))\n    def test_mp_login(self, username, code, expect):\n    \n        try:\n            # 调用登录业务方法\n            self.mp.page_mp_login(username, code)\n            # 断言\n            assert expect == self.mp.page_get_nickname()\n        except  Exception as e:\n            print(\"错误原因\",e)\n>           self.mp.base_get_img()\n\nscripts/test_01_mp_login.py:36: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nbase/base.py:68: in base_get_img\n    self.__base_write_img(file_path)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <page.page_mp_login.PageMpLogin object at 0x1113ceed0>, file_path = '/Users/lq/python/test/2020-09/uiAutoTestHmtt/image/20200917100112_.png'\n\n    def __base_write_img(self, file_path):\n        with open(file_path, \"rb\") as f:\n            file = f.read()\n>           allure.attach(\"错误原因\", file, allure.attach_type.PNG)\nE           NameError: name 'allure' is not defined\n\nbase/base.py:73: NameError"}, "attachments": [{"name": "log", "source": "ba603ec7-d20a-4485-a690-baf4dad8de3d-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "username", "value": "'13812345678'"}, {"name": "code", "value": "246810"}, {"name": "expect", "value": "'13812345678'"}], "start": 1600308042663, "stop": 1600308074872, "uuid": "77a192b3-fbb3-4ba3-866f-21582ea87bd8", "historyId": "8943cd08d1f1e00cb70aad96ea3ca0ef", "testCaseId": "0ef744100323d73770fc699b5f270c3a", "fullName": "scripts.test_01_mp_login.TestMpLogin#test_mp_login", "labels": [{"name": "parentSuite", "value": "scripts"}, {"name": "suite", "value": "test_01_mp_login"}, {"name": "subSuite", "value": "TestMpLogin"}, {"name": "host", "value": "promote.cache-dns.local"}, {"name": "thread", "value": "37578-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "scripts.test_01_mp_login"}]}